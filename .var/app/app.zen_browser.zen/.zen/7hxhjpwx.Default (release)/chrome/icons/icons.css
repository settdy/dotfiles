@media (-moz-pref("svg.context-properties.content.enabled")) {

  /*FluentUI*/
  @media (not (-moz-pref("cmi-Switch-Icon-Package", 0)))
    and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) {

  .subviewbutton {
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important;
  }
  

      :root[fxastatus="not_configured"] #fxa-avatar-image {
        list-style-image: url("account.svg") !important;
      }
      
      .private-browsing-indicator-icon {
        list-style-image: url("account-private.svg") !important;
        border-radius: 100% !important;
      }
      
      #back-button {
        list-style-image: url("arrow-left.svg") !important;
      }
      
      #forward-button {
        list-style-image: url("arrow-right.svg") !important;
      }
      
      #reload-button {
        list-style-image: url("reload_l.svg") !important;
      }
      
      #stop-button,
      .close-icon {
        list-style-image: url("close.svg") !important;
      }
      
      #sidebar-button {
        list-style-image: url("sidebars-right.svg") !important;
      }
      
      #sidebar-button:-moz-locale-dir(ltr):not([positionend]),
      #sidebar-button:-moz-locale-dir(rtl)[positionend] {
        list-style-image: url("sidebars.svg") !important;
      }
      
      
      
      #nav-bar-overflow-button {
        list-style-image: url("chevron.svg") !important;
      }
      
      #PanelUI-menu-button {
        list-style-image: url("menu.svg") !important;
      }
      
      #new-tab-button {
        list-style-image: url("new-tab.svg") !important;
      }
      
      #sync-button,
      .urlbarView-row[source="tabs"]
        > .urlbarView-row-inner
        > .urlbarView-no-wrap
        > .urlbarView-favicon,
      #urlbar-engine-one-off-item-tabs {
        list-style-image: url("tab.svg") !important;
      }
      
      #history-panelmenu,
      .urlbarView-row[source="history"]
        > .urlbarView-row-inner
        > .urlbarView-no-wrap
        > .urlbarView-favicon,
      #urlbar-engine-one-off-item-history,
      #sidebar-switcher-history,
      #sidebar-box[sidebarcommand="viewHistorySidebar"]
        > #sidebar-header
        > #sidebar-switcher-target
        > #sidebar-icon {
        list-style-image: url("history.svg") !important;
      }
      
      #save-page-button {
        list-style-image: url("save.svg") !important;
      }
      
      #print-button {
        list-style-image: url("print.svg") !important;
      }
      
      .searchbar-search-icon {
        list-style-image: url("search-glass.svg") !important;
      }
      
      #find-button {
        list-style-image: url("search-page.svg") !important;
      }
      
      #open-file-button {
        list-style-image: url("open.svg") !important;
      }
      
      #zoom-out-button {
        list-style-image: url("zoom-out.svg") !important;
      }
      
      #zoom-in-button,
      #tabs-newtab-button,
      #TabsToolbar #new-tab-button {
        list-style-image: url("plus.svg") !important;
      }
      
      #cut-button {
        list-style-image: url("edit-cut.svg") !important;
      }
      
      #copy-button {
        list-style-image: url("edit-copy.svg") !important;
      }
      
      #paste-button {
        list-style-image: url("edit-paste.svg") !important;
      }
      
      #email-link-button {
        list-style-image: url("mail.svg") !important;
      }
      
      #screenshot-button {
        list-style-image: url("screenshot.svg") !important;
      }
      
      .search-setting-button > .button-box > .button-icon,
      .unified-extensions-item-open-menu.subviewbutton {
        list-style-image: url("settings.svg") !important;
      }
      
      #spell-check-enabled {
        list-style-image: url("spell-check.svg") !important;
      }
      #panic-button {
        list-style-image: url("forget.svg") !important;
      }
      
      #privatebrowsing-button {
        list-style-image: url("privateBrowsing.svg") !important;
      }
      
      #save-to-pocket-button {
        list-style-image: url("pocket-outline.svg") !important;
      }
      
      #profiler-button-button > .toolbarbutton-icon,
      .subviewbutton[label="Task Manager"] {
        list-style-image: url("tool-profiler.svg") !important;
      }
      
      #developer-button {
        list-style-image: url("developer.svg") !important;
      }
      
      #new-window-button {
        list-style-image: url("window.svg") !important;
      }
      
      #restore-button,
      #fullscreen-button {
        list-style-image: url("fullscreen.svg") !important;
      }
      
      #restore-button[checked],
      #fullscreen-button[checked] {
        list-style-image: url("fullscreen-exit.svg") !important;
      }
      
      #bookmarks-menu-button,
      #sidebar-switcher-bookmarks,
      #sidebar-box[sidebarcommand="viewBookmarksSidebar"]
        > #sidebar-header
        > #sidebar-switcher-target
        > #sidebar-icon {
        list-style-image: url("bookmark-star-on-tray.svg") !important;
      }
      
      /* identity icons */
      #identity-icon {
        list-style-image: url("info.svg") !important;
      }
      
      #identity-box[pageproxystate="valid"].chromeUI #identity-icon {
        list-style-image: url("firefox.svg") !important;
      }
      
      #identity-box[pageproxystate="valid"].localResource #identity-icon {
        list-style-image: url("page-portrait.svg") !important;
      }
      
      #urlbar:not(.searchButton)
        > #urlbar-input-container
        > #identity-box[pageproxystate="invalid"]
        #identity-icon {
        list-style-image: url("search-glass.svg") !important;
      }
      
      #urlbar[actiontype="extension"]
        > #urlbar-input-container
        > #identity-box
        #identity-icon,
      #identity-box[pageproxystate="valid"].extensionPage #identity-icon {
        list-style-image: url("extension.svg") !important;
      }
      
      #identity-box[pageproxystate="valid"].verifiedDomain #identity-icon,
      #identity-box[pageproxystate="valid"].mixedActiveBlocked #identity-icon {
        list-style-image: url("security.svg") !important;
      }
      
      #urlbar-input-container[pageproxystate="valid"]
        > #tracking-protection-icon-container
        > #tracking-protection-icon-box
        > #tracking-protection-icon {
        list-style-image: url("tracking-protection.svg") !important;
      }
      
      /* security */
      .identity-popup-security-connection {
        list-style-image: url("security-broken.svg") !important;
      }
      
      #identity-box[pageproxystate="valid"].notSecure #identity-icon,
      #identity-box[pageproxystate="valid"].mixedActiveContent #identity-icon,
      #identity-box[pageproxystate="valid"].httpsOnlyErrorPage #identity-icon {
        list-style-image: url("security-broken.svg") !important;
      }
      
      #identity-popup[connection="chrome"] .identity-popup-security-connection {
        list-style-image: url("firefox.svg") !important;
      }
      
      #identity-popup[connection="file"] .identity-popup-security-connection {
        list-style-image: url("page-portrait.svg") !important;
      }
      
      #identity-popup[connection^="secure"] .identity-popup-security-connection {
        list-style-image: url("security.svg") !important;
      }
      
      #identity-popup[ciphers="weak"] .identity-popup-security-connection,
      #identity-popup[mixedcontent~="passive-loaded"][isbroken]
        .identity-popup-security-connection,
      #identity-popup[connection="secure-cert-user-overridden"]
        .identity-popup-security-connection,
      #identity-popup[connection="cert-error-page"]
        .identity-popup-security-connection {
        list-style-image: url("security-warning.svg") !important;
      }
      
      #identity-popup[connection="net-error-page"]
        .identity-popup-security-connection {
        list-style-image: url("info.svg") !important;
      }
      
      #identity-popup[connection="extension"] .identity-popup-security-connection {
        list-style-image: url("extension.svg") !important;
      }
      
      .findbar-find-previous {
        list-style-image: url("arrow-up.svg") !important;
      }
      
      .findbar-find-next {
        list-style-image: url("arrow-down.svg") !important;
      }
      
      #protections-popup-mainView .subviewbutton-nav:not(.notFound)::after,
      #identity-popup-mainView .subviewbutton-nav::after,
      .widget-overflow-list .subviewbutton-nav::after,
      .PanelUI-subView .subviewbutton-nav::after,
      .menu-right {
        content: url("arrow-right.svg") !important;
      }
      
      #PlacesChevron,
      #urlbar-go-button {
        list-style-image: url("arrow-right.svg") !important;
      }
      
      .panel-header > .subviewbutton-back {
        list-style-image: url("arrow-left.svg") !important;
      }
      
      #overflowMenu-customize-button,
      #appmenu-moreTools-button {
        list-style-image: url("customize.svg") !important;
      }
      


      #pageAction-panel-bookmark,
      #star-button {
        
        /* 做成 16×16 的容器 */
        width: 16px;
        height: 16px;
        
        /* 插入 SVG，居中不重复 */
        background-image: url("bookmark-hollow.svg") !important;
        background-repeat: no-repeat !important;
        background-position: center !important;
        
        /* 将图像整体从 14×14 缩放到 16×16 */
        background-size: 18px 18px !important;
        
        /* 保证文本和图标之间有点间距 */
        padding-inline-start: 20px !important;

      }
      
      #pageAction-panel-bookmark[starred],
      #star-button[starred] {

        width: 16px;
        height: 16px;
        
        background-image: url("bookmark.svg") !important;
        background-repeat: no-repeat !important;
        background-position: center !important;
        
        background-size: 18px 18px !important;
        padding-inline-start: 20px !important;

      }

      #sidebar-box[sidebarcommand="viewTabsSidebar"]
        > #sidebar-header
        > #sidebar-switcher-target
        > #sidebar-icon,
      #sidebar-switcher-tabs {
        list-style-image: url("send-to-device.svg") !important;
      }
      
      /* tab icons */
      .tab-icon-image[src="chrome://branding/content/icon32.png"],
      .tab-icon-image[src="chrome://browser/skin/privatebrowsing/favicon.svg"] {
        content: url("new-tab-image.svg") !important;
      }
      
      .tab-icon-image[src="chrome://global/skin/icons/settings.svg"] {
        content: url("settings.svg") !important;
      }
      
      .tab-icon-image[src="chrome://mozapps/skin/extensions/extension.svg"] {
        content: url("extension.svg") !important;
      }
      
      .tab-icon-image[src="chrome://browser/skin/customize.svg"] {
        content: url("customize.svg") !important;
      }
      
      /* permissions */
      #permissions-granted-icon {
        list-style-image: url("permissions.svg") !important;
      }
      
      .geo-icon {
        list-style-image: url("geo.svg") !important;
      }
      
      .geo-icon.blocked-permission-icon {
        list-style-image: url("geo-blocked.svg") !important;
      }
      
      .xr-icon {
        list-style-image: url("xr.svg") !important;
      }
      
      .xr-icon.blocked-permission-icon {
        list-style-image: url("xr-blocked.svg") !important;
      }
      
      .popup-notification-icon[popupid="web-notifications"],
      .desktop-notification-icon {
        list-style-image: url("desktop-notification.svg") !important;
      }
      
      .desktop-notification-icon.blocked-permission-icon {
        list-style-image: url("desktop-notification-blocked.svg") !important;
      }
      
      .camera-icon {
        list-style-image: url("camera.svg") !important;
      }
      
      .camera-icon.blocked-permission-icon {
        list-style-image: url("camera-blocked.svg") !important;
      }
      
      .microphone-icon {
        list-style-image: url("microphone.svg") !important;
      }
      
      .microphone-icon.blocked-permission-icon {
        list-style-image: url("microphone-blocked.svg") !important;
      }
      
      .screen-icon {
        list-style-image: url("screen.svg") !important;
      }
      
      .screen-icon.blocked-permission-icon {
        list-style-image: url("screen-blocked.svg") !important;
      }
      
      .popup-notification-icon[popupid="persistent-storage"],
      .persistent-storage-icon,
      .indexedDB-icon {
        list-style-image: url("persistent-storage.svg") !important;
      }
      
      .persistent-storage-icon.blocked-permission-icon {
        list-style-image: url("persistent-storage-blocked.svg") !important;
      }
      
      .popup-icon {
        list-style-image: url("popup.svg") !important;
      }
      
      .autoplay-media-icon {
        list-style-image: url("autoplay-media.svg") !important;
      }
      
      .autoplay-media-icon.blocked-permission-icon {
        list-style-image: url("autoplay-media-blocked.svg") !important;
      }
      
      #canvas-notification-icon,
      .popup-notification-icon[popupid="canvas-permissions-prompt"],
      .canvas-icon {
        list-style-image: url("canvas.svg") !important;
      }
      
      .canvas-icon.blocked-permission-icon {
        list-style-image: url("canvas-blocked.svg") !important;
      }
      
      .midi-icon,
      .midi-sysex-icon,
      .popup-notification-icon[popupid="midi"],
      .popup-notification-icon[popupid="midi-sysex"] {
        list-style-image: url("midi-blocked.svg") !important;
      }
      
      .install-icon {
        list-style-image: url("extension.svg") !important;
      }
      
      .install-icon.blocked-permission-icon,
      .popup-notification-icon[popupid="xpinstall-disabled"],
      .popup-notification-icon[popupid="addon-install-blocked"],
      .popup-notification-icon[popupid="addon-install-origin-blocked"] {
        list-style-image: url("extension-blocked.svg") !important;
      }
      
      /* v1.5
      .tab-icon-overlay[soundplaying] {
        list-style-image: url("tab-audio-playing-small.svg") !important;
      }
      
      .tab-icon-overlay[muted] {
        list-style-image: url("tab-audio-muted-small.svg") !important;
      }
      
      .tab-icon-overlay[activemedia-blocked] {
        list-style-image: url("tab-audio-blocked-small.svg") !important;
      }
      
      #reader-mode-button > .urlbar-icon {
        list-style-image: url("reader-mode.svg") !important;
      }
      */     
      #unified-extensions-manage-extensions {
        list-style-image: url("manage.svg") !important;
      }
      
      /* Context Menu Icons */
      menupopup > menuitem:is([checked="true"], [selected="true"]) .menu-iconic-icon {
        list-style-image: url("checkmark.svg") !important;
      }
      
      #context-video-pictureinpicture:not([checked="true"]) .menu-iconic-icon {
        list-style-image: url("media-pip.svg") !important;
      }
      
      #context-media-loop:not([checked="true"]) .menu-iconic-icon {
        list-style-image: url("media-loop.svg") !important;
      }
      
      :not(:not(menubar) > menu, #ContentSelectDropdown)
        > menupopup
        > menuitem:not(
          .menuitem-iconic,
          [type="checkbox"],
          [type="radio"],
          .in-menulist,
          .in-menulist menuitem,
          .unified-nav-current
        ),
      :not(:not(menubar) > menu, #ContentSelectDropdown)
        > menupopup
        > menu:not(
          .menu-iconic,
          [type="checkbox"],
          [type="radio"],
          .in-menulist,
          .in-menulist menu,
          .unified-nav-current
        ),
      #toggle_toolbar-menubar,
      #PanelUI-history toolbarbutton,
      #unified-extensions-context-menu menuitem {
        background-image: var(--menu-image) !important;
        background-size: 16px !important;
        background-position: var(--fp-contextmenu-menuitem-padding-inline) center !important;
        background-repeat: no-repeat !important;
        -moz-context-properties: fill, fill-opacity !important;
        fill: currentColor !important;
      }
      
      #context-savepage {
        --menu-image: url("save.svg");
      }
      
      #context-selectall,
      .textbox-contextmenu menuitem[cmd*="selectAll"],
      #context_selectAllTabs,
      #toolbar-context-selectAllTabs {
        --menu-image: url("edit-select-all.svg");
      }
      
      #context-undo,
      .textbox-contextmenu menuitem[cmd*="undo"],
      #context_undoCloseTab,
      #toolbar-context-undoCloseTab {
        --menu-image: url("edit-undo.svg");
      }
      
      #context_unloadTab {
        --menu-image: url("unloadTab.svg");
      }
      #toggle_toolbar-menubar {
        --menu-image: url("menu-bar.svg");
      }
      
      #context-redo,
      .textbox-contextmenu menuitem[cmd*="redo"] {
        --menu-image: url("edit-redo.svg");
      }
      
      #context-copy,
      .textbox-contextmenu menuitem[cmd*="copy"],
      .textbox-contextmenu #strip-on-share,
      #placesContext_copy {
        --menu-image: url("edit-copy.svg");
      }
      
      #context-paste,
      .textbox-contextmenu menuitem[cmd*="paste"],
      #placesContext_paste_group {
        --menu-image: url("edit-paste.svg");
      }
      .textbox-contextmenu menuitem.searchbar-paste-and-search {
        --menu-image: url("edit-paste.svg");
      }
      .textbox-contextmenu menuitem.searchbar-clear-history {
        --menu-image: url("edit-delete.svg");
      }
      #context-cut,
      .textbox-contextmenu menuitem[cmd*="cut"],
      #placesContext_cut {
        --menu-image: url("edit-cut.svg");
      }
      #placesContext_sortBy\:name {
          --menu-image: url("sort.svg");
      }
      #context-delete,
      .customize-context-removeExtension,
      .unified-extensions-context-menu-remove-extension,
      .textbox-contextmenu menuitem[cmd*="delete"],
      menuitem[id="placesContext_deleteBookmark"],
      menuitem[id="placesContext_deleteFolder"],
      menuitem[id="placesContext_delete"],
      menuitem[id="placesContext_delete_history"],
      menuitem[id="placesContext_deleteHost"] {
        --menu-image: url("edit-delete.svg");
      }
      
      #paste-and-go {
        --menu-image: url("paste-and-go.svg");
      }
      
      #context-print-selection {
        --menu-image: url("print.svg");
      }
      
      #context-take-screenshot {
        --menu-image: url("screenshot.svg");
      }
      
      #context-ask-chat {
        --menu-image: url("ask-chat.svg");
      }
      
      #context-viewsource {
        --menu-image: url("source-code.svg");
      }
      
      #context-inspect-a11y {
        --menu-image: url("accessibility.svg");
      }
      
      #context-inspect {
        --menu-image: url("inspect.svg");
      }
      
      #context-searchselect {
        --menu-image: url("search-glass.svg");
      }
      #context-searchselect-private {
          --menu-image: url("search-glass.svg");
      }

      #context-add-engine {
        --menu-image: url("search-add.svg");
      }

      #context-translate-selection {
          --menu-image: url("translations.svg");
      }
      #context-viewimage {
        --menu-image: url("image-open.svg");
      }
      #context-viewimageinfo {
        --menu-image: url("info.svg");
      }
      #context-saveimage,
      #context-video-saveimage {
        --menu-image: url("image-save.svg");
      }
      
      #context-savevideo {
        --menu-image: url("video-save.svg");
      }
      
      #context-viewvideo {
        --menu-image: url("video-open.svg");
      }
      
      #context-saveaudio {
        --menu-image: url("audio-save.svg");
      }
      
      #context-copyimage-contents {
        --menu-image: url("image-copy.svg");
      }
      
      #context-copyimage,
      #context-copyvideourl,
      #context-copylink,
      #context-stripOnShareLink,
      #context-pdfjs-copy {
        --menu-image: url("link.svg");
      }
      #context-openlinkincurrent {
        --menu-image: url("ext-link.svg");
      }
      
      #context-viewsource,
      #context-viewframesource,
      #context-viewpartialsource-selection {
        --menu-image: url("source-code.svg");
      }
      
      #context-sendimage,
      #context-sendvideo,
      #context-sendaudio {
        --menu-image: url("mail.svg");
      }
      
      #context-setDesktopBackground,
      #toolbar-context-customize,
      #toolbar-context-customize-sidebar {
        --menu-image: url("customize.svg");
      }
      
      #context-reloadimage,
      #context_reloadTab,
      #context_reloadSelectedTabs,
      #toolbar-context-reloadSelectedTab,
      #toolbar-context-reloadSelectedTabs {
        --menu-image: url("reload.svg");
      }
      
      #context-sendlinktodevice,
      #context_sendTabToDevice,
      #context-sendpagetodevice {
        --menu-image: url("send-to-device.svg");
      }
      
      #context-openlinkintab,
      #context-openlinkincontainertab,
      menuitem[id="placesContext_open:newtab"],
      menuitem[id="placesContext_openLinks:tabs"],
      menuitem[id="placesContext_openBookmarkLinks:tabs"],
      menuitem[id="placesContext_openBookmarkContainer:tabs"] {
        --menu-image: url("tab.svg");
      }
      
      #context_openANewTab,
      #toolbar-context-openANewTab {
        --menu-image: url("new-tab-image.svg");
      }
      
      #context_moveTabToGroup,
      #context_moveTabToNewGroup {
        --menu-image: url("TabGroup-add.svg");
      }
        
      #context_ungroupTab {
        --menu-image: url("TabGroup-remove.svg");
      }
      
      #context-openlinkinusercontext-menu,
      menu[id="placesContext_open:newcontainertab"],
      menu[id="placesContext_openContainer:tabs"] {
        --menu-image: url("container-tab.svg");
      }
      
      #context-openlink,
      menuitem[id="placesContext_open:newwindow"] {
        --menu-image: url("window.svg");
      }
      
      #context-openlinkprivate,
      menuitem[id="placesContext_open:newprivatewindow"] {
        --menu-image: url("private-window.svg");
      }
      
      #context-savelink {
        --menu-image: url("downloads.svg");
      }
      
      #spell-add-to-dictionary {
        --menu-image: url("add-to-dictionary.svg");
      }
      
      #manage-saved-logins {
        --menu-image: url("passwords.svg");
      }
      
      #context-media-play,
      #context_playTab,
      #context_playSelectedTabs {
        --menu-image: url("media-play.svg");
      }
      
      #context-media-pause {
        --menu-image: url("media-pause.svg");
      }
      
      #context-media-mute,
      #context_toggleMuteTab,
      #context_toggleMuteSelectedTabs {
        --menu-image: url("media-mute.svg");
      }
      
      #context-media-unmute,
      #context_toggleMuteTab[muted],
      #context_toggleMuteSelectedTabs[muted] {
        --menu-image: url("media-unmute.svg");
      }
      
      #context-media-playbackrate {
        --menu-image: url("media-speed.svg");
      }
      
      #context-video-fullscreen {
        --menu-image: url("fullscreen.svg");
      }
      
      #context-leave-dom-fullscreen,
      menuitem[contexttype="fullscreen"][label*="Exit"] {
        --menu-image: url("fullscreen-exit.svg");
      }
      
      #context-media-hidecontrols,
      #context-media-showcontrols {
        --menu-image: url("permissions.svg");
      }
      
      #context_pinTab,
      #context_pinSelectedTabs,
      .customize-context-moveToPanel {
        --menu-image: url("pin.svg"); 
      }
      
      #context_unpinTab,
      #context_unpinSelectedTabs {
        --menu-image: url("unpin.svg"); 
      }
      .customize-context-removeFromToolbar {
        --menu-image: url("unpin.svg");
      }
      #context_duplicateTab,
      #context_duplicateTabs {
        --menu-image: url("duplicate-tab.svg");
      }
      
      #context_bookmarkTab,
      #context_bookmarkSelectedTabs,
      #toggle_PersonalToolbar,
      #context-bookmarklink,
      #toolbar-context-bookmarkSelectedTab,
      #toolbar-context-bookmarkSelectedTabs {
        --menu-image: url("bookmark-hollow.svg");
      }
      
      menuitem[id="placesContext_show_bookmark:info"],
      menuitem[id="placesContext_show_folder:info"],
      menuitem[id="placesContext_show:info"] {
        --menu-image: url("edit.svg");
      }
      
      menuitem[id="placesContext_showAllBookmarks"],
      #BMB_bookmarksShowAllTop,
      #BMB_bookmarksShowAll,
      .customize-context-manageExtension,
      .unified-extensions-context-menu-manage-extension {
        --menu-image: url("manage.svg");
      }
      #BMB_viewBookmarksSidebar {
        --menu-image: url("sidebars.svg");
      }
      #BMB_searchBookmarks {
        --menu-image: url("search-page.svg");
      }
      
      #PanelUI-historyMore {
        --menu-image: url("manage.svg");
      }
      
      menuitem[id="placesContext_new:bookmark"],
      menuitem[id="placesContext_new:folder"],
      menuitem[id="placesContext_new:separator"] {
        --menu-image: url("plus.svg");
      }
      
      #context-savelinktopocket,
      #context-pocket {
        --menu-image: url("pocket-outline.svg");
      }
      
      #context_moveTabOptions {
        --menu-image: url("move-tab.svg");
      }
      
      .share-tab-url-item {
        --menu-image: url("share.svg");
      }
      
      #context_reopenInContainer {
        --menu-image: url("container-tab.svg");
      }
      
      #context_closeTab,
      #context_closeDuplicateTabs {
        --menu-image: url("close.svg");
      }
      #context_closeTabOptions {
        --menu-image: url("close-all.svg");
      }
      .customize-context-reportExtension,
      .unified-extensions-context-menu-report-extension {
        --menu-image: url("report.svg");
      }
      
      .panel-header > h1 {
        text-align: left;
        margin-left: 8px !important;
      }
      
      .panel-header > h1 > span::before {
        content: "";
        background: var(--header-image, none) center / 16px no-repeat;
        -moz-context-properties: fill, fill-opacity;
        fill: currentColor;
        padding-inline-start: calc(var(--fp-enabled, 0) * 16px);
        margin-inline-end: calc(var(--fp-enabled, 0) * 8px);
      }
      
      #PanelUI-fxa .panel-header > h1 > span::before {
        --header-image: var(--avatar-image-url);
        --fp-enabled: 1;
        transform: scale(1.25);
        border-radius: 99px;
        display: inline-block;
        height: 16px;
      }
      
      #PanelUI-bookmarks .panel-header > h1 > span::before {
        --header-image: url("bookmark-star-on-tray.svg");
        --fp-enabled: 1;
      }
      
      #PanelUI-history .panel-header > h1 > span::before {
        --header-image: url("history.svg");
        --fp-enabled: 1;
      }
      
      #PanelUI-helpView .panel-header > h1 > span::before {
        --header-image: url("help.svg");
        --fp-enabled: 1;
      }
      
      #appMenu-libraryView .panel-header > h1 > span::before {
        --header-image: url("library.svg");
        --fp-enabled: 1;
      }
      
      #unified-extensions-panel .panel-header > h1 > span::before {
        --header-image: url("extension.svg");
        --fp-enabled: 1;
      }
      .unified-extensions-context-menu-pin-to-toolbar {
        --menu-image: url("pin.svg");
      }
      .unified-extensions-context-menu-move-widget-down {
        --menu-image: url("arrow-down.svg");
      }
      .unified-extensions-context-menu-move-widget-up {
        --menu-image: url("arrow-up.svg");
      }
      .unified-extensions-item
        .webextension-browser-action.subviewbutton
        > .toolbarbutton-badge-stack
        > .toolbarbutton-icon {
        height: 24px !important;
        width: 24px !important;
      }
      
      
      /* Special icon for Zen */
      #zen-toolbar-context-tabs-right {
        --menu-image: url("tab-right.svg");
      }
      
      #context_zen-add-essential {
        --menu-image: url("essential-add.svg");
      }
      
      #context_zen-remove-essential {
        --menu-image: url("essential-remove.svg");
      }
      
      #context-zen-change-workspace-tab {
        --menu-image: url("move-tab.svg");
      }
      #context_zenSplitTabs,
      #context-zenSplitLink {
        --menu-image: url("split.svg");
      }
      #zenToolbarThemePicker {
        --menu-image: url("customize.svg");
      }
      #zen-context-menu-compact-mode {
        --menu-image: url("compact-mode.svg");
      }
      #placesContext_paste,
      #context-paste-no-formatting {
        --menu-image: url("edit-paste.svg");
      }
      #context_zen-reset-pinned-tab,
      #context_zen-replace-pinned-url-with-current {
        --menu-image: url("reload.svg");
      }
      #zen-context-menu-new-folder,
      #zen-context-menu-new-folder-toolbar {
        --menu-image: url("new-folder.svg");        
      }
    
    
      #appMenu-downloads-button,
      #appMenu-library-downloads-button {
        list-style-image: url("downloads.svg") !important;
      }
    
      #appMenu-translate-button {
        list-style-image: url("translations_l.svg") !important;
      }
    
      #appMenu-zoom-controls {
        list-style-image: url("plus.svg") !important;
      }
    
      #appMenu-passwords-button {
        list-style-image: url("passwords.svg") !important;
      }
    
      #appMenu-more-button2 {
        list-style-image: url("menu.svg") !important;
      }
    
      #appMenu-help-button2 {
        list-style-image: url("help.svg") !important;
      }
    
      #appMenu-quit-button2 {
        list-style-image: url("close_l.svg") !important;
      }
    
      #appMenu-report-broken-site-button {
        list-style-image: url("report.svg") !important;
      }
    
      #appMenu-history-button,
      #appMenu-library-history-button {
        list-style-image: url("history_l.svg") !important;
      }
    
      #appMenu-save-file-button2 {
        list-style-image: url("save_l.svg") !important;
      }
    
    
      #appMenu-print-button2 {
        list-style-image: url("print_l.svg") !important;
      }
    
    
      #appMenu-find-button2 {
        list-style-image: url("search-page.svg") !important;
      }
    
      #appMenu-extensions-themes-button {
        list-style-image: url("extension.svg") !important;
      }
    
      #appMenu-zoomReduce-button2 {
        list-style-image: url("zoom-out.svg") !important;
      }
    
      #appMenu-zoomEnlarge-button2 {
        list-style-image: url("plus.svg") !important;
      }
    
      #appMenu-new-window-button2 {
        list-style-image: url("window.svg") !important;
      }
    
      #appMenu-new-private-window-button2 {
        list-style-image: url("private-window.svg") !important;
      }
      
      #appMenu-fullscreen-button2 {
        list-style-image: url("fullscreen_l.svg") !important;
      }
      #appMenu-fullscreen-button2[checked] {
        list-style-image: url("fullscreen-exit_l.svg") !important;
      }
    
      #appMenu-bookmarks-button,
      #appMenu-library-bookmarks-button {
        list-style-image: url("bookmark-star-on-tray.svg") !important;
      }
    
      #appMenu-new-tab-button2 {
        list-style-image: url("new-tab-image.svg") !important;
      }
    
      #appMenuRecentlyClosedTabs {
        --menu-image: url("container-tab.svg");
      }
    
      #appMenuClearRecentHistory {
        --menu-image: url("edit-delete.svg");
      }
    
      #appMenuRecentlyClosedWindows {
        --menu-image: url("window.svg");
      }
    
      #appMenuSearchHistory {
        --menu-image: url("search-glass.svg");
      }
    
    
      #downloads-button,
      #downloads-indicator-anchor {
      list-style-image: url("downloads.svg") !important;
      }
    
      #preferences-button,
      #appMenu-settings-button {
        list-style-image: url("settings.svg") !important;
      }
    
    
      #library-button {
        list-style-image: url("library.svg") !important;
      }
      #home-button {
        list-style-image: url("home.svg") !important;
      }
      #add-ons-button,
      #unified-extensions-button {
        list-style-image: url("extension.svg") !important;
      }
  }

  /*ZenUI*/
  @media (-moz-pref("cmi-Switch-Icon-Package", 2)) {
    
    /* Restore back context menu icons pre-1.12.9b */
    /* I'm not guaranteeing there will be icons for future context menu options */
    /* Help me contribute on this, hit me up on github.com/KiKaraage/ZenMods/issues */

    /* PART 1: Setting inline padding and margin values */
    :root {

        --zen-contextmenu-menuitem-padding-inline: 5px !important;
        --zen-contextmenu-menuicon-margin-inline: 3px !important;
        --zen-contextmenu-menuitem-margin: 0px 2px !important;
      }

      
      /* PART 3: Adding icons back to regular context menu options */
      :not(:not(menubar) > menu, #ContentSelectDropdown)
      > menupopup
      > menuitem:not(
      .menuitem-iconic,
      [type='checkbox'],
      [type='radio'],
      .in-menulist,
      .in-menulist menuitem,
      .unified-nav-current
      ) {
        background-image: var(--menu-image) !important;
        background-size: 16px !important;
        background-position: var(--zen-contextmenu-menuitem-padding-inline) center !important;
        background-repeat: no-repeat !important;
        -moz-context-properties: fill, fill-opacity !important;
        fill: currentColor !important;
      }
      
      /* PART 4: Adding icons back to context menu options that has arrow */
      :not(:not(menubar) > menu, #ContentSelectDropdown)
      > menupopup > menu:not(
        .menu-iconic, [type='checkbox'], [type='radio'],
        .in-menulist, .in-menulist menu, .unified-nav-current
      ),
      #toggle_toolbar-menubar,
      #PanelUI-history toolbarbutton,
      #unified-extensions-context-menu menuitem {
        background-image: var(--menu-image) !important;
        background-size: 16px !important;
        background-position: var(--zen-contextmenu-menuitem-padding-inline) center !important;
        background-repeat: no-repeat !important;
        -moz-context-properties: fill, fill-opacity !important;
        fill: currentColor !important; 
      }
      

    /* PART 6: Specifying icons to apply for options in Unified Extensions Menu */
    @media not (-moz-platform: linux) {

        .unified-extensions-context-menu-pin-to-toolbar {
          --menu-image: url('chrome://browser/skin/zen-icons/pin.svg');
        }
      }
      .unified-extensions-context-menu-move-widget-down {
        --menu-image: url('chrome://browser/skin/zen-icons/arrow-down.svg');
      }
      .unified-extensions-context-menu-move-widget-up {
        --menu-image: url('chrome://browser/skin/zen-icons/arrow-up.svg');
      }
    

    /* PART 7:  Specifying icons to apply for other context menu options */
    /* Use icons from Zen icon directory - chrome://browser/skin/zen-icons/ */
    /* Use icons from Firefox icon directory - chrome://browser/skin/ */
    
      #context_zenSplitTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/sidebars-right.svg') !important;
      }
      #context-zen-change-workspace-tab {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg') !important;
      }
      #context-zenSplitLink {
        --menu-image: url('chrome://browser/skin/zen-icons/split.svg') !important;
      }
      
      #context_zenOpenWorkspace,
      #context_zenOpenWorkspacePanel {
        --menu-image: url('chrome://browser/skin/zen-icons/manage.svg') !important;
      }
      #context_zenEditWorkspaceIcon {
        --menu-image: url('chrome://browser/skin/zen-icons/canvas.svg') !important;
      }
      .zenToolbarThemePicker,
      #zenToolbarThemePicker {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-theme.svg') !important;
      }
      #context-video-pictureinpicture:not([checked='true']) .menu-iconic-icon {
        list-style-image: url('chrome://browser/skin/zen-icons/media-pip.svg') !important;
      }
      #context-media-loop:not([checked='true']) .menu-iconic-icon {
        list-style-image: url('chrome://browser/skin/zen-icons/media-loop.svg') !important;
      }
      
      #context-savepage {
        --menu-image: url('chrome://browser/skin/zen-icons/save.svg');
      }
      #context-selectall,
      .textbox-contextmenu menuitem[cmd*='selectAll'],
      #context_selectAllTabs,
      #toolbar-context-selectAllTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-select-all.svg');
      }
      #context-undo,
      .textbox-contextmenu menuitem[cmd*='undo'],
      #context_undoCloseTab,
      #toolbar-context-undoCloseTab {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-undo.svg');
      }
      #toggle_toolbar-menubar {
        --menu-image: url('chrome://browser/skin/zen-icons/menu-bar.svg');
      }
      #context-redo,
      .textbox-contextmenu menuitem[cmd*='redo'] {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-redo.svg');
      }
      #context-copy,
      .textbox-contextmenu menuitem[cmd*='copy'],
      .textbox-contextmenu #strip-on-share,
      #placesContext_copy {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-copy.svg');
      }
      #context-paste,
      .textbox-contextmenu menuitem[cmd*='paste'],
      #placesContext_paste_group {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-paste.svg');
      }
      #context-cut,
      .textbox-contextmenu menuitem[cmd*='cut'],
      #placesContext_cut {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-cut.svg');
      }
      #context-delete,
      .customize-context-removeExtension,
      .unified-extensions-context-menu-remove-extension,
      .textbox-contextmenu menuitem[cmd*='delete'],
      menuitem[id='placesContext_deleteBookmark'],
      menuitem[id='placesContext_deleteFolder'],
      menuitem[id='placesContext_delete'],
      menuitem[id='placesContext_delete_history'],
      menuitem[id='placesContext_deleteHost'],
      #context_zenDeleteWebPanel,
      #context_zenDeleteWorkspace {
        --menu-image: url('chrome://browser/skin/zen-icons/edit-delete.svg');
      }
      #paste-and-go {
        --menu-image: url('chrome://browser/skin/zen-icons/paste-and-go.svg');
      }
      #context-print-selection {
        --menu-image: url('chrome://browser/skin/zen-icons/print.svg');
      }
      #context-take-screenshot {
        --menu-image: url('chrome://browser/skin/zen-icons/screenshot.svg');
      }
      #context-viewsource {
        --menu-image: url('chrome://browser/skin/zen-icons/source-code.svg');
      }
      #context-inspect-a11y {
        --menu-image: url('chrome://browser/skin/zen-icons/accessibility.svg');
      }
      #context-inspect {
        --menu-image: url('chrome://browser/skin/zen-icons/inspect.svg');
      }
      #context-searchselect {
        --menu-image: url('chrome://browser/skin/zen-icons/search-glass.svg');
      }
      #context-searchselect-private {
        --menu-image: url('chrome://browser/skin/privateBrowsing.svg');
      }
      #context-viewimage {
        --menu-image: url('chrome://browser/skin/zen-icons/image-open.svg');
      }
      #context-viewimageinfo {
        --menu-image: url('chrome://browser/skin/zen-icons/info.svg');
      }
      #context-saveimage,
      #context-video-saveimage {
        --menu-image: url('chrome://browser/skin/zen-icons/image-save.svg');
      }
      #context-savevideo {
        --menu-image: url('chrome://browser/skin/zen-icons/video-save.svg');
      }
      #context-viewvideo {
        --menu-image: url('chrome://browser/skin/zen-icons/video-open.svg');
      }
      #context-saveaudio {
        --menu-image: url('chrome://browser/skin/zen-icons/audio-save.svg');
      }
      #context-copyimage-contents {
        --menu-image: url('chrome://browser/skin/zen-icons/image-copy.svg');
      }
      #context-copyimage,
      #context-copyvideourl,
      #context-copylink,
      #context-stripOnShareLink,
      #context_zenOpenNewTabWebPanel,
      #context-pdfjs-copy {
        --menu-image: url('chrome://browser/skin/zen-icons/link.svg');
      }
      #context-openlinkincurrent {
        --menu-image: url('chrome://browser/skin/zen-icons/ext-link.svg');
      }
      #context-ask-chat {
        --menu-image: url('chrome://browser/skin/trending.svg');
      }
      #context-translate-selection {
        --menu-image: url('chrome://browser/skin/translations.svg');
      }
      #context-viewsource,
      #context-viewframesource,
      #context-viewpartialsource-selection {
        --menu-image: url('chrome://browser/skin/zen-icons/source-code.svg');
      }
      #context-sendimage,
      #context-sendvideo,
      #context-sendaudio {
        --menu-image: url('chrome://browser/skin/zen-icons/mail.svg');
      }
      #context-setDesktopBackground,
      .viewCustomizeToolbar {
        --menu-image: url('chrome://browser/skin/zen-icons/customize.svg');
      }
      #context-reloadimage,
      #context_reloadTab,
      #context_reloadSelectedTabs,
      #toolbar-context-reloadSelectedTab,
      #toolbar-context-reloadSelectedTabs,
      #context_zen-reset-pinned-tab {
        --menu-image: url('chrome://browser/skin/zen-icons/reload.svg');
      }
      #context-sendlinktodevice,
      #context_sendTabToDevice,
      #context-sendpagetodevice {
        --menu-image: url('chrome://browser/skin/zen-icons/send-to-device.svg');
      }
      #context-openlinkintab,
      #context-openlinkincontainertab,
      #context_zenWorkspacesOpenInContainerTab,
      #context_zenWebPanelContextInContainer,
      menuitem[id='placesContext_open:newtab'],
      menuitem[id='placesContext_openLinks:tabs'],
      menuitem[id='placesContext_openBookmarkLinks:tabs'],
      menuitem[id='placesContext_openBookmarkContainer:tabs'] {
        --menu-image: url('chrome://browser/skin/zen-icons/tab.svg');
      }
      #context_openANewTab,
      #toolbar-context-openANewTab {
        --menu-image: url('chrome://browser/skin/zen-icons/new-tab-image.svg');
      }
      #context-openlinkinusercontext-menu,
      menu[id='placesContext_open:newcontainertab'],
      menu[id='placesContext_openContainer:tabs'] {
        --menu-image: url('chrome://browser/skin/zen-icons/container-tab.svg');
      }
      #context-openlink,
      menuitem[id='placesContext_open:newwindow'] {
        --menu-image: url('chrome://browser/skin/zen-icons/window.svg');
      }
      #context-openlinkprivate,
      menuitem[id='placesContext_open:newprivatewindow'] {
        --menu-image: url('chrome://browser/skin/zen-icons/private-window.svg');
      }
      #context-savelink {
        --menu-image: url('chrome://browser/skin/zen-icons/downloads.svg');
      }
      #spell-add-to-dictionary {
        --menu-image: url('chrome://browser/skin/zen-icons/add-to-dictionary.svg');
      }
      #manage-saved-logins {
        --menu-image: url('chrome://browser/skin/zen-icons/passwords.svg');
      }
      #context-media-play,
      #context_playTab,
      #context_playSelectedTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/media-play.svg');
      }
      #context-media-pause {
        --menu-image: url('chrome://browser/skin/zen-icons/media-pause.svg');
      }
      #context-media-mute,
      #context_toggleMuteTab,
      #context_toggleMuteSelectedTabs,
      #context_zenToggleMuteWebPanel {
        --menu-image: url('chrome://browser/skin/zen-icons/media-mute.svg');
      }
      #context-media-unmute,
      #context_toggleMuteTab[muted],
      #context_toggleMuteSelectedTabs[muted],
      #context_zenToggleMuteWebPanel[muted] {
        --menu-image: url('chrome://browser/skin/zen-icons/media-unmute.svg');
      }
      #context-media-playbackrate {
        --menu-image: url('chrome://browser/skin/zen-icons/media-speed.svg');
      }
      #context-video-fullscreen {
        --menu-image: url('chrome://browser/skin/zen-icons/fullscreen.svg');
      }
      #context-leave-dom-fullscreen,
      menuitem[contexttype='fullscreen'][label*='Exit'] {
        --menu-image: url('chrome://browser/skin/zen-icons/fullscreen-exit.svg');
      }
      #context-media-hidecontrols,
      #context-media-showcontrols {
        --menu-image: url('chrome://browser/skin/zen-icons/permissions.svg');
      }
      #context_pinTab,
      #context_unpinTab,
      #context_pinSelectedTabs,
      #context_unpinSelectedTabs,
      .customize-context-moveToPanel,
      #context_zen-replace-pinned-url-with-current {
        --menu-image: url('chrome://browser/skin/zen-icons/pin.svg');
      }
      #context_zen-add-essential {
        --menu-image: url('chrome://browser/skin/zen-icons/essential-add.svg');
      }
      #context_zen-remove-essential {
        --menu-image: url('chrome://browser/skin/zen-icons/essential-remove.svg');
      }
      .customize-context-removeFromToolbar {
        --menu-image: url('chrome://browser/skin/zen-icons/unpin.svg');
      }
      #zen-sidebar-web-panel-pinned[pinned='true'] {
        list-style-image: url('chrome://browser/skin/zen-icons/pin.svg') !important;
      }
      #zen-sidebar-web-panel-pinned {
        list-style-image: url('chrome://browser/skin/zen-icons/unpin.svg') !important;
      }
      #context_duplicateTab,
      #context_duplicateTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/duplicate-tab.svg');
      }
      #zen-context-menu-compact-mode {
        --menu-image: url('chrome://browser/skin/zen-icons/sidebar.svg');
      }
      #context_bookmarkTab,
      #context_bookmarkSelectedTabs,
      #toggle_PersonalToolbar,
      #context-bookmarklink,
      #toolbar-context-bookmarkSelectedTab,
      #toolbar-context-bookmarkSelectedTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/bookmark-hollow.svg');
      }
      menuitem[id='placesContext_show_bookmark:info'],
      menuitem[id='placesContext_show_folder:info'],
      menuitem[id='placesContext_show:info'] {
        --menu-image: url('chrome://browser/skin/zen-icons/edit.svg');
      }
      menuitem[id='placesContext_showAllBookmarks'],
      #BMB_bookmarksShowAllTop,
      #BMB_bookmarksShowAll,
      .customize-context-manageExtension,
      .unified-extensions-context-menu-manage-extension {
        --menu-image: url('chrome://browser/skin/zen-icons/manage.svg');
      }
      #BMB_viewBookmarksSidebar {
        --menu-image: url('chrome://browser/skin/sidebars.svg');
      }
      #BMB_searchBookmarks {
        --menu-image: url('chrome://browser/skin/zen-icons/search-page.svg');
      }
      menuitem[id='placesContext_new:bookmark'],
      menuitem[id='placesContext_new:folder'],
      menuitem[id='placesContext_new:separator'],
      #context_zenEditWorkspace {
        --menu-image: url('chrome://browser/skin/zen-icons/plus.svg');
      }
      #context-savelinktopocket,
      #context-pocket {
        --menu-image: url('chrome://browser/skin/zen-icons/pocket-outline.svg');
      }
      #context_ungroupTab,
      #context_moveTabOptions {
        --menu-image: url('chrome://browser/skin/zen-icons/move-tab.svg');
      }
      .share-tab-url-item {
        --menu-image: url('chrome://browser/skin/zen-icons/share.svg');
      }
      #context_moveTabToNewGroup,
      #context_moveTabToGroup,
      #context_reopenInContainer {
        --menu-image: url('chrome://browser/skin/zen-icons/container-tab.svg');
      }
      #context_closeTab,
      #context_closeDuplicateTabs {
        --menu-image: url('chrome://browser/skin/zen-icons/close.svg');
      }
      #context_closeTabOptions {
        --menu-image: url('chrome://browser/skin/zen-icons/close-all.svg');
      }
      #context_unloadTab,
      #context_zenTabActions {
        --menu-image: url('chrome://browser/skin/zen-icons/close-all.svg');
      }
      .customize-context-reportExtension,
      .unified-extensions-context-menu-report-extension {
        --menu-image: url('chrome://browser/skin/zen-icons/report.svg');
      }
      .wordmark::after {
        content: 'Plus' !important;
      }

  }

}  
  

/* Preferences */
@media not (-moz-pref("cmi-Disable-Better-Context-Menu",true)){
          
/* -------------------------- Better Context Menu -------------------------- */

/* Base Hover Styling for Menu Items */
:is(menu, menuitem):hover {
    border-radius: 12px !important;
}

/* Hide "New Tab" Option */
#context_openANewTab {
    display: none !important;
}

/* General Context Menu Layout */
#tabContextMenu {
    width: 280px !important;
}

menuseparator {
    &:first-of-type {
        display: none !important;
    }

    &::before {
        opacity: 0.3;
    }
}

/* Tab Context Menu */
#tabContextMenu:has(#context_reloadTab:not([hidden])):has(:is(#context_zen-add-essential,
#context_zen-remove-essential):not([hidden])):has(:is(#context_pinTab, #context_unpinTab, #context_bookmarkTab):not([hidden])) {
    :nth-child(1 of menuseparator) {
        display: flex !important;
        visibility: visible !important;
        order: -1 !important;
    }

    #context_reloadTab,
    :is(#context_zen-add-essential, #context_zen-remove-essential),
    :is(#context_pinTab, #context_unpinTab),
    #context_bookmarkTab {
        order: -999 !important;
        width: 25% !important;
        --height: 42px;
        height: var(--height) !important;

        position: relative;
        overflow: hidden;

        background-position: center !important;
        border-radius: 12px !important;
        transition: box-shadow 0.4s ease-in-out;

        .menu-text {
            display: none !important;
        }
    }

    /* Positioning Each Button */
    #context_reloadTab {
        margin-left: 0 !important;
    }

    :is(#context_pinTab, #context_unpinTab) {
        margin-left: 25% !important;
        margin-top: calc(0px - var(--height)) !important;
    }

    #context_zen-remove-essential {
        margin-left: 37.5% !important;
        margin-top: calc(0px - var(--height)) !important;
    }

    #context_zen-add-essential {
        margin-left: 50% !important;
        margin-top: calc(0px - var(--height)) !important;
    }

    #context_bookmarkTab {
        margin-left: 75% !important;
        margin-top: calc(0px - var(--height)) !important;
    }
}
/* Tab Context Menu （multiple tabs are selected)*/
#tabContextMenu:has(#context_reloadSelectedTabs:not([hidden])):has(:is(#context_zen-add-essential,
#context_zen-remove-essential):not([hidden])):has(:is(#context_pinSelectedTabs, #context_unpinSelectedTabs, #context_bookmarkSelectedTabs):not([hidden])) {
    :nth-child(1 of menuseparator) {
        display: flex !important;
        visibility: visible !important;
        order: -1 !important;
    }

    #context_reloadSelectedTabs,
    :is(#context_zen-add-essential, #context_zen-remove-essential),
    :is(#context_pinSelectedTabs, #context_unpinSelectedTabs),
    #context_bookmarkSelectedTabs {
        order: -999 !important;
        width: 25% !important;
        --height: 42px;
        height: var(--height) !important;

        position: relative;
        overflow: hidden;

        background-position: center !important;
        border-radius: 12px !important;
        transition: box-shadow 0.4s ease-in-out;

        .menu-text {
            display: none !important;
        }
    }

    /* Positioning Each Button */
    #context_reloadSelectedTabsb {
        margin-left: 0 !important;
    }

    :is(#context_pinSelectedTabs, #context_unpinSelectedTabs) {
        margin-left: 25% !important;
        margin-top: calc(0px - var(--height)) !important;
    }

    #context_zen-remove-essential {
        margin-left: 37.5% !important;
        margin-top: calc(0px - var(--height)) !important;
    }

    #context_zen-add-essential {
        margin-left: 50% !important;
        margin-top: calc(0px - var(--height)) !important;
    }

    #context_bookmarkSelectedTabs {
        margin-left: 75% !important;
        margin-top: calc(0px - var(--height)) !important;
    }
}

/* TabGroup Context Menu */
#tabContextMenu:has(#context_reloadTab:not([hidden])):has(:is(#context_pinTab, #context_unpinTab, #context_bookmarkTab):not([hidden])) {
    :nth-child(1 of menuseparator) {
        display: flex !important;
        visibility: visible !important;
        order: -1 !important;
    }

    #context_reloadTab,
    :is(#context_zen-add-essential, #context_zen-remove-essential),
    :is(#context_pinTab, #context_unpinTab),
    #context_bookmarkTab {
        order: -999 !important;
        width: 25% !important;
        --height: 42px;
        height: var(--height) !important;

        position: relative;
        overflow: hidden;

        background-position: center !important;
        border-radius: 12px !important;
        transition: box-shadow 0.4s ease-in-out;

        .menu-text {
            display: none !important;
        }
    }

    /* Positioning Each Button */
    #context_reloadTab {
        margin-left: 0 !important;
    }

    :is(#context_pinTab, #context_unpinTab) {
        margin-left: 37.5% !important;
        margin-top: calc(0px - var(--height)) !important;
    }

    #context_bookmarkTab {
        margin-left: 75% !important;
        margin-top: calc(0px - var(--height)) !important;
    }
}

/* TabGroup Context Menu （multiple tabs are selected)*/
#tabContextMenu:has(#context_reloadSelectedTabs:not([hidden])):has(:is(#context_pinSelectedTabs, #context_unpinSelectedTabs, #context_bookmarkSelectedTabs):not([hidden])) {
    :nth-child(1 of menuseparator) {
        display: flex !important;
        visibility: visible !important;
        order: -1 !important;
    }

    #context_reloadSelectedTabs,
    :is(#context_zen-add-essential, #context_zen-remove-essential),
    :is(#context_pinSelectedTabs, #context_unpinSelectedTabs),
    #context_bookmarkSelectedTabs {
        order: -999 !important;
        width: 25% !important;
        --height: 42px;
        height: var(--height) !important;

        position: relative;
        overflow: hidden;

        background-position: center !important;
        border-radius: 12px !important;
        transition: box-shadow 0.4s ease-in-out;

        .menu-text {
            display: none !important;
        }
    }

    /* Positioning Each Button */
    #context_reloadSelectedTabsb {
        margin-left: 0 !important;
    }

    :is(#context_pinSelectedTabs, #context_unpinSelectedTabs) {
        margin-left: 37.5% !important;
        margin-top: calc(0px - var(--height)) !important;
    }

    #context_bookmarkSelectedTabs {
        margin-left: 75% !important;
        margin-top: calc(0px - var(--height)) !important;
    }
}


/* -------------------------- Gradient Animation Base -------------------------- */
#context_reloadTab::before,
:is(#context_zen-add-essential, #context_zen-remove-essential)::before,
:is(#context_pinTab, #context_unpinTab)::before,
#context_bookmarkTab::before {
    content: "";
    position: absolute;
    inset: 2px;
    border-radius: 12px !important;
    clip-path: inset(-1 round 12px);
    pointer-events: none;

    background: linear-gradient(
        45deg,
        color-mix(in srgb, var(--zen-primary-color) 5%, black),
        color-mix(in srgb, var(--zen-primary-color) 20%, black),
        color-mix(in srgb, var(--zen-primary-color) 50%, black),
        color-mix(in srgb, var(--zen-primary-color) 90%, black),
        color-mix(in srgb, var(--zen-primary-color) 50%, black),
        color-mix(in srgb, var(--zen-primary-color) 15%, black)
    );

    background-size: 400% 400%;
    filter: blur(10px) brightness(1);
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
}

/* Hover Activates Gradient Effect */
#context_reloadTab:hover::before,
:is(#context_zen-add-essential, #context_zen-remove-essential):hover::before,
:is(#context_pinTab, #context_unpinTab):hover::before,
#context_bookmarkTab:hover::before {
    opacity: 0.5;
    animation-play-state: running;
}

@keyframes tab-hover-gradient {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

}


/* Hide the inactive items in Context Menu */
@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
@media (-moz-pref("cmi-Hide-Inactive-Items-TabContextMenu")) {
  #tabContextMenu > menuitem[disabled]:not(:is(
    #context_zen-add-essential,
    #context_zen-remove-essential,
    #context_zenSplitTabs
  )) {
    visibility: collapse !important;
  }
  #tabContextMenu:has(> menuitem#context_reloadTab:not([hidden]))
    > menuitem#context_zenSplitTabs {
      visibility: collapse !important;
  }
}
@media (-moz-pref("cmi-Hide-Inactive-Items-ContentAreaContextMenu")) {
  #contentAreaContextMenu > menuitem[disabled]
  {
    visibility: collapse !important;
  }
}


@media (-moz-pref("cmi-Grayscale-Extensions-Icons")){

  .menu-icon:not(.bookmark-item .menu-icon):not(toolbarbutton.bookmark-item .menu-icon) {
    fill: var(--arrowpanel-icon-color) !important;
    filter: grayscale(100%) invert(100%) brightness(150%);
  }
}

  /* Align the icons of the extension with those of CMI */
  /* ==== 1. 声明命名空间 & 作用域 ==== */
@-moz-document url-prefix("chrome://browser/content/browser.xhtml") {
  @namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");
  @media (
    -moz-pref("cmi-Align-Extension-Icons")
  ),
  (
    -moz-pref("cmi-Switch-Icon-Package", 2)
  ) {
  /* ==== 2. 自定义变量（方便后续统一调整） ==== */
  :root {
    /* 图标左边距（图标与左侧边框之间） */
    --zen-cmenu-icon-margin-inline-start: 4px !important;
    /* 图标右边距（图标与文字之间） */
    --zen-cmenu-icon-margin-inline-end: 8px !important;
    /* 图标上下边距（图标与上下菜单项之间） */
    --zen-cmenu-icon-margin-block: 2px !important;
    /* 图标固定尺寸（保证所有图标同高同宽） */
    --zen-cmenu-icon-size: 16px !important;
  }

  /* ==== 3. 针对所有上下文菜单项中的图标 ==== */
  menupopup > menuitem > .menu-icon,
  menupopup > menu > .menu-icon {
    /* 固定图标大小 */
    width: var(--zen-cmenu-icon-size);
    height: var(--zen-cmenu-icon-size);

    /* 调整外边距：左、右、上下 */
    margin-inline-start: var(--zen-cmenu-icon-margin-inline-start);
    margin-inline-end: var(--zen-cmenu-icon-margin-inline-end);
    margin-block-start: var(--zen-cmenu-icon-margin-block);
    margin-block-end: var(--zen-cmenu-icon-margin-block);

    /* 内边距保持 0（图标本身不要额外内边距） */
    padding: 0 !important;
  }

  /* ==== 4. 文本也向右推进，和图标保持间距一致 ==== */
  menupopup > menuitem .menu-text,
  menupopup > menu .menu-text {
    padding-inline-start: 0 !important; /* 重置可能已有的内边距 */
    margin-inline-start: 0 !important;  /* 重置可能已有的外边距 */
    /* 让文字紧贴图标右侧 */
    padding-inline-start: var(--zen-cmenu-icon-margin-inline-end);
  }
    }
}


@media (-moz-pref("cmi-Center-Bookmark-Items")){
  #PlacesToolbarItems {
    justify-content: center !important; 
  }
}

@media (-moz-pref("cmi-Hide-Folder-Icon")){
  toolbarbutton.bookmark-item > .toolbarbutton-icon {
    display: none !important;
  }
}


/* Shift the text to the right to make room for the custom icon.*/

:root {
  --fp-contextmenu-menuicon-margin-inline: 12px;
  --fp-contextmenu-menuitem-padding-inline: 10px;
  --fp-arrowpanel-menuicon-margin-inline: 14px;
}

menu > .menu-iconic-text,
menuitem > .menu-iconic-text,
#context-navigation > .menuitem-iconic::after {
  padding-inline-start: var(--fp-contextmenu-menuicon-margin-inline) !important;
}

/*Context Menu*/
@media (not (-moz-pref("cmi-Switch-Icon-Package", 0)))
  and (not (-moz-pref("cmi-Switch-Icon-Package", 2))) {

/* 1. 只排除顶栏菜单和文字选取下拉 */
/* 2. 排除下载管理器菜单 */
/* 3. 排除：已勾选的复选/单选、带图标、menulist 内的、unified-nav-current */
:not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup)
  > menuitem:not(
      .menuitem-iconic,
      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],
      .in-menulist,
      .in-menulist menuitem,
      .unified-nav-current
    ),
:not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup)
  > menu:not(
      .menu-iconic,
      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],
      .in-menulist,
      .in-menulist menu,
      .unified-nav-current
    ),
:not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup)
  > menucaption {
    padding-inline-start: calc(
      var(--fp-contextmenu-menuitem-padding-inline)
      + 16px
      + var(--fp-contextmenu-menuicon-margin-inline)
    ) !important;
}

/* —— 当满足以下任意条件时，给所有子项统一添加内边距 —— */
:is(
  
  /* 书签栏 */
  menupopup#placesContext:has(
    > menuitem#show-other-bookmarks_PersonalToolbar:is([checked="true"])
  ),
  /* 工具栏 */
  menupopup#toolbar-context-menu:has(
    > menuitem#zen-toolbar-context-tabs-right:is([checked="true"]),
    > menuitem#zen-context-menu-compact-mode-toggle:is([checked="true"]),
    > menuitem#toolbar-context-pin-to-toolbar:is([checked="true"])

  ),
  /* 当循环或PIP勾选时 */
  menupopup#contentAreaContextMenu:has(
    > menuitem#context-media-loop:not([hidden])[checked="true"],
    > #context-video-pictureinpicture:not([hidden])[checked="true"]
  ),
  /* 当拼写检查勾选 */
  menupopup#contentAreaContextMenu:has(
    > menuitem#spell-check-enabled:is([checked="true"])
  ),
  menupopup#unified-extensions-context-menu:has(
    > menuitem:is([checked="true"])
  )

) {
  /* 普通菜单项 & 子菜单容器，排除图标项、已勾选复选/单选、已分组和高亮项 */
  > :is(menuitem, menu):not(
      .menuitem-iconic,
      .menu-iconic,

      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],

      .in-menulist,
      .in-menulist menuitem,
      .in-menulist menu,
      .unified-nav-current
    ),
  /* 分组标题 */
  > menucaption {
    padding-inline-start: var(--fp-contextmenu-menuicon-margin-inline)  !important;
  }
}
 
}

@media (-moz-pref("cmi-Switch-Icon-Package", 2)) {

/* 1. 只排除顶栏菜单和文字选取下拉 */
/* 2. 排除下载管理器菜单 */
/* 3. 排除：已勾选的复选/单选、带图标、menulist 内的、unified-nav-current */
:not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup)
  > menuitem:not(
      .menuitem-iconic,
      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],
      .in-menulist,
      .in-menulist menuitem,
      .unified-nav-current
    ),
:not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup)
  > menu:not(
      .menu-iconic,
      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],
      .in-menulist,
      .in-menulist menu,
      .unified-nav-current
    ),
:not(:not(menubar) > menu, #ContentSelectDropdown)
  > menupopup:not(#downloadsContextMenu,#zenCreateNewPopup)
  > menucaption {
    padding-inline-start: calc(
      var(--fp-contextmenu-menuitem-padding-inline)
      + 8px
      + var(--fp-contextmenu-menuicon-margin-inline)
    ) !important;
}

/* —— 当满足以下任意条件时，给所有子项统一添加内边距 —— */
:is(
  
  /* 书签栏 */
  menupopup#placesContext:has(
    > menuitem#show-other-bookmarks_PersonalToolbar:is([checked="true"])
  ),
  /* 工具栏 */
  menupopup#toolbar-context-menu:has(
    > menuitem#zen-toolbar-context-tabs-right:is([checked="true"]),
    > menuitem#zen-context-menu-compact-mode-toggle:is([checked="true"]),
    > menuitem#toolbar-context-pin-to-toolbar:is([checked="true"])

  ),
  /* 当循环或PIP勾选时 */
  menupopup#contentAreaContextMenu:has(
    > menuitem#context-media-loop:not([hidden])[checked="true"],
    > #context-video-pictureinpicture:not([hidden])[checked="true"]
  ),
  /* 当拼写检查勾选 */
  menupopup#contentAreaContextMenu:has(
    > menuitem#spell-check-enabled:is([checked="true"])
  ),
  menupopup#unified-extensions-context-menu:has(
    > menuitem:is([checked="true"])
  )

) {
  /* 普通菜单项 & 子菜单容器，排除图标项、已勾选复选/单选、已分组和高亮项 */
  > :is(menuitem, menu):not(
      .menuitem-iconic,
      .menu-iconic,

      [type="checkbox"][checked="true"],
      [type="radio"][checked="true"],

      .in-menulist,
      .in-menulist menuitem,
      .in-menulist menu,
      .unified-nav-current
    ),
  /* 分组标题 */
  > menucaption {
    padding-inline-start: var(--fp-contextmenu-menuicon-margin-inline)-8px  !important;
  }
}

}

/*Main Menu*/  
.widget-overflow-list .toolbarbutton-1:not(.toolbarbutton-combined) > .toolbarbutton-text,
.subviewbutton:not(#appMenu-zoom-controls > .subviewbutton) > .toolbarbutton-icon + .toolbarbutton-text,
#appMenu-fxa-label2 > vbox {

  padding-inline-start: var(--fp-arrowpanel-menuicon-margin-inline) !important;
}

#appMenu-zoom-controls > .toolbarbutton-text,
#fxa-manage-account-button > vbox,
#PanelUI-fxa-menu-syncnow-button > hbox {
  padding-inline-start: calc(16px + var(--fp-arrowpanel-menuicon-margin-inline)) !important;
}

/* This is used to temporarily solve the problem where the "historical" icons that Zen has not yet removed overlap with the added custom icons. */
#appMenuRecentlyClosedTabs,
#appMenuRecentlyClosedWindows,
#appMenuSearchHistory,
#appMenuClearRecentHistory,
#PanelUI-historyMore{
  --menu-image: none;
}